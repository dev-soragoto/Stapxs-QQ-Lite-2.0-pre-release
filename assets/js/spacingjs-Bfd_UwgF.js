class ${constructor(t){this.top=t.top,this.left=t.left,this.width=t.width,this.height=t.height,this.right=t.right,this.bottom=t.bottom}colliding(t){return!(this.top>t.bottom||this.right<t.left||this.bottom<t.top||this.left>t.right)}containing(t){return this.left<=t.left&&t.left<this.width&&this.top<=t.top&&t.top<this.height}inside(t){return t.top<=this.top&&this.top<=t.bottom&&t.top<=this.bottom&&this.bottom<=t.bottom&&t.left<=this.left&&this.left<=t.right&&t.left<=this.right&&this.right<=t.right}}function R(e,t,s){let{width:d,height:f,top:n,left:i}=t.getBoundingClientRect(),l=window.getComputedStyle(t).fontSize,o=document.createElement("div");o.classList.add(`spacing-js-${e}-placeholder`),o.style.border=`2px solid ${s}`,o.style.position="fixed",o.style.background="none",o.style.borderRadius="2px",o.style.padding="0",o.style.margin="0",o.style.width=`${d-2}px`,o.style.height=`${f-2}px`,o.style.top=`${n-1}px`,o.style.left=`${i-1}px`,o.style.pointerEvents="none",o.style.zIndex="9999",o.style.boxSizing="content-box",document.body.appendChild(o);let a=document.createElement("span");a.style.background=s,a.style.position="fixed",a.style.display="inline-block",a.style.color="#fff",a.style.padding="2px 4px",a.style.fontSize="10px";let v="",E=n;n<20?(n<0&&(E=0,v="↑ "),a.style.borderRadius="2px 0 2px 0"):(a.style.transform="translateY(calc(-100% + 2px))",a.style.borderRadius="2px 2px 0 0"),a.style.top=`${E-1}px`,a.style.left=`${i-1}px`,a.innerText=`${v} ${Math.round(d)}px × ${Math.round(f)}px [${l?`font-size: ${l}]`:""}`,o.appendChild(a)}function x(e){var t;(t=document.querySelector(`.spacing-js-${e}-placeholder`))==null||t.remove()}function g(e,t,s,d,f,n="none"){let i=document.createElement("span");i.style.backgroundColor="red",i.style.position="fixed",i.classList.add("spacing-js-marker"),i.style.width=`${e}px`,i.style.height=`${t}px`,n==="x"&&(i.style.borderLeft="1px solid rgba(255, 255, 255, .8)",i.style.borderRight="1px solid rgba(255, 255, 255, .8)"),n==="y"&&(i.style.borderTop="1px solid rgba(255, 255, 255, .8)",i.style.borderBottom="1px solid rgba(255, 255, 255, .8)"),i.style.pointerEvents="none",i.style.top=`${s}px`,i.style.left=`${d}px`,i.style.zIndex="9998",i.style.boxSizing="content-box";let l=document.createElement("span");if(l.classList.add("spacing-js-value"),l.style.backgroundColor="red",l.style.color="white",l.style.fontSize="10px",l.style.display="inline-block",l.style.fontFamily="Helvetica, sans-serif",l.style.fontWeight="bold",l.style.borderRadius="20px",l.style.position="fixed",l.style.width="42px",l.style.lineHeight="15px",l.style.height="16px",l.style.textAlign="center",l.style.zIndex="10000",l.style.pointerEvents="none",l.innerText=f,l.style.boxSizing="content-box",n==="x"){let o=s+t/2-7;o>document.documentElement.clientHeight-20&&(o=document.documentElement.clientHeight-20),o<0&&(o=6),l.style.top=`${o}px`,l.style.left=`${d+6}px`}else if(n==="y"){let o=d+e/2-20;o>document.documentElement.clientWidth-48&&(o=document.documentElement.clientWidth-48),o<0&&(o=6),l.style.top=`${s+6}px`,l.style.left=`${o}px`}document.body.appendChild(i),document.body.appendChild(l)}function y(e,t,s,d,f=!1){if(s==="top"){let n=1,i=Math.abs(e.top-t.top),l=Math.floor((Math.min(e.right,t.right)+Math.max(e.left,t.left))/2),o=Math.min(e.top,t.top);if(f){if(e.top<t.top||e.right<t.left||e.left>t.right)return;i=Math.abs(t.bottom-e.top),o=Math.min(t.bottom,e.top)}g(n,i,o,l,d,"x")}else if(s==="left"){let n=Math.abs(e.left-t.left),i=1,l=Math.floor((Math.min(e.bottom,t.bottom)+Math.max(e.top,t.top))/2),o=Math.min(e.left,t.left);if(f){if(e.left<t.left||e.bottom<t.top||e.top>t.bottom)return;n=Math.abs(e.left-t.right),o=Math.min(t.right,e.left)}g(n,i,l,o,d,"y")}else if(s==="right"){let n=Math.abs(e.right-t.right),i=1,l=Math.floor((Math.min(e.bottom,t.bottom)+Math.max(e.top,t.top))/2),o=Math.min(e.right,t.right);if(f){if(e.left>t.right||e.bottom<t.top||e.top>t.bottom)return;n=Math.abs(e.right-t.left)}g(n,i,l,o,d,"y")}else if(s==="bottom"){let n=1,i=Math.abs(e.bottom-t.bottom),l=Math.min(e.bottom,t.bottom),o=Math.floor((Math.min(e.right,t.right)+Math.max(e.left,t.left))/2);if(f){if(t.bottom<e.top||e.right<t.left||e.left>t.right)return;i=Math.abs(e.bottom-t.top)}g(n,i,l,o,d,"x")}}function z(){document.querySelectorAll(".spacing-js-marker").forEach(function(e){e.remove()}),document.querySelectorAll(".spacing-js-value").forEach(function(e){e.remove()})}let u=!1,h=null,p,m,w=!1,b=null,M=!1;const P={start(){if(!document.body){console.warn("Unable to initialise, document.body does not exist.");return}window.addEventListener("keydown",L),window.addEventListener("keyup",k),window.addEventListener("mousemove",S),window.addEventListener("mouseout",H)},stop(){window.removeEventListener("keydown",L),window.removeEventListener("keyup",k),window.removeEventListener("mousemove",S)}};function L(e){w&&(c(),b&&(clearTimeout(b),b=null)),e.key==="Alt"&&(e.preventDefault(),M=!0,!u&&h&&(u=!0,D(),C(!0))),e.shiftKey&&(w=!0)}function k(e){e.key==="Alt"&&(M=!1,u&&(b=setTimeout(()=>{c()},w?3e3:0)))}function H(e){let t=e.relatedTarget;!M&&(!t||t.nodeName==="HTML")&&(h=null,c())}function c(){u=!1,x("selected"),x("target"),w=!1,p=null,m=null,z(),C(!1)}function S(e){e.composedPath?h=e.composedPath()[0]:h=e.target,u&&j().then(()=>{if(p!=null&&m!=null){let t=p.getBoundingClientRect(),s=m.getBoundingClientRect(),d=new $(t),f=new $(s);z();let n,i,l,o,a;d.containing(f)||d.inside(f)||d.colliding(f)?(console.log("containing || inside || colliding"),n=Math.round(Math.abs(t.top-s.top)),i=Math.round(Math.abs(t.bottom-s.bottom)),l=Math.round(Math.abs(t.left-s.left)),o=Math.round(Math.abs(t.right-s.right)),a=!1):(console.log("outside"),n=Math.round(Math.abs(t.top-s.bottom)),i=Math.round(Math.abs(t.bottom-s.top)),l=Math.round(Math.abs(t.left-s.right)),o=Math.round(Math.abs(t.right-s.left)),a=!0),y(d,f,"top",`${n}px`,a),y(d,f,"bottom",`${i}px`,a),y(d,f,"left",`${l}px`,a),y(d,f,"right",`${o}px`,a)}})}function D(){h&&h!==p&&(p=h,x("selected"),R("selected",p,"red"))}function j(){return new Promise((e,t)=>{u&&h&&h!==p&&h!==m&&(m=h,x("target"),R("target",m,"blue"),e())})}function C(e){e?(window.addEventListener("DOMMouseScroll",r,!1),window.addEventListener("wheel",r,{passive:!1}),window.addEventListener("mousewheel",r,{passive:!1})):(window.removeEventListener("DOMMouseScroll",r),window.removeEventListener("wheel",r),window.removeEventListener("mousewheel",r))}function r(e){e.preventDefault()}export{P as S};
