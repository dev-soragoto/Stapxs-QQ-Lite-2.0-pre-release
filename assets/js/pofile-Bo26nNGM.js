import{g as y}from"./@stapxs-Av0aUqI6.js";import{r as $}from"./rollup-plugin-node-polyfills-CZQjtHVe.js";function x(t){return t.replace(/^\s+|\s+$/g,"")}var l=function(){this.comments=[],this.extractedComments=[],this.headers={},this.headerOrder=[],this.items=[]};l.prototype.save=function(t,e){$.writeFile(t,this.toString(),e)};l.prototype.toString=function(){var t=[];this.comments&&this.comments.forEach(function(n){t.push(("# "+n).trim())}),this.extractedComments&&this.extractedComments.forEach(function(n){t.push(("#. "+n).trim())}),t.push('msgid ""'),t.push('msgstr ""');var e=this,u=[];this.headerOrder.forEach(function(n){n in e.headers&&u.push(n)});var o=Object.keys(this.headers);return o.forEach(function(n){u.indexOf(n)===-1&&u.push(n)}),u.forEach(function(n){t.push('"'+n+": "+e.headers[n]+'\\n"')}),t.push(""),this.items.forEach(function(n){t.push(n.toString()),t.push("")}),t.join(`
`)};l.load=function(t,e){$.readFile(t,"utf-8",function(u,o){if(u)return e(u);var n=l.parse(o);e(null,n)})};l.parse=function(t){t=t.replace(/\r\n/g,`
`);for(var e=new l,u=t.split(/\n\n/),o=[];u[0]&&(o.length===0||o[o.length-1].indexOf('msgid ""')<0);)u[0].match(/msgid\s+"[^"]/)?o.push('msgid ""'):o.push(u.shift());o=o.join(`
`);var n=u.join(`
`).split(/\n/);e.headers={"Project-Id-Version":"","Report-Msgid-Bugs-To":"","POT-Creation-Date":"","PO-Revision-Date":"","Last-Translator":"",Language:"","Language-Team":"","Content-Type":"","Content-Transfer-Encoding":"","Plural-Forms":""},e.headerOrder=[],o.split(/\n/).reduce(function(i,v){return i.merge&&(v=i.pop().slice(0,-1)+v.slice(1),delete i.merge),/^".*"$/.test(v)&&!/^".*\\n"$/.test(v)&&(i.merge=!0),i.push(v),i},[]).forEach(function(i){if(i.match(/^#\./))e.extractedComments.push(i.replace(/^#\.\s*/,""));else if(i.match(/^#/))e.comments.push(i.replace(/^#\s*/,""));else if(i.match(/^"/)){i=i.trim().replace(/^"/,"").replace(/\\n"$/,"");var v=i.split(/:/),C=v.shift().trim(),E=v.join(":").trim();e.headers[C]=E,e.headerOrder.push(C)}});var d=l.parsePluralForms(e.headers["Plural-Forms"]),g=d.nplurals,r=new l.Item({nplurals:g}),s=null,p=0,f=0,c=0;function h(){r.msgid.length>0&&(f>=c&&(r.obsolete=!0),f=0,c=0,e.items.push(r),r=new l.Item({nplurals:g}))}function m(i){return i=x(i),i=i.replace(/^[^"]*"|"$/g,""),i=i.replace(/\\([abtnvfr'"\\?]|([0-7]{3})|x([0-9a-fA-F]{2}))/g,function(v,C,E,P){if(E)return String.fromCharCode(parseInt(E,8));if(P)return String.fromCharCode(parseInt(P,16));switch(C){case"a":return"\x07";case"b":return"\b";case"t":return"	";case"n":return`
`;case"v":return"\v";case"f":return"\f";case"r":return"\r";default:return C}}),i}for(;n.length>0;){var a=x(n.shift()),b=!1;if(a.match(/^#\~/)&&(a=x(a.substring(2)),b=!0),a.match(/^#:/))h(),r.references.push(x(a.replace(/^#:/,"")));else if(a.match(/^#,/)){h();for(var _=x(a.replace(/^#,/,"")).split(","),O=0;O<_.length;O++)r.flags[_[O]]=!0}else if(a.match(/^#($|\s+)/))h(),r.comments.push(x(a.replace(/^#($|\s+)/,"")));else if(a.match(/^#\./))h(),r.extractedComments.push(x(a.replace(/^#\./,"")));else if(a.match(/^msgid_plural/))r.msgid_plural=m(a),s="msgid_plural",c++;else if(a.match(/^msgid/))h(),r.msgid=m(a),s="msgid",c++;else if(a.match(/^msgstr/)){var j=a.match(/^msgstr\[(\d+)\]/);p=j&&j[1]?parseInt(j[1]):0,r.msgstr[p]=m(a),s="msgstr",c++}else a.match(/^msgctxt/)?(h(),r.msgctxt=m(a),s="msgctxt",c++):a.length>0&&(c++,s==="msgstr"?r.msgstr[p]+=m(a):s==="msgid"?r.msgid+=m(a):s==="msgid_plural"?r.msgid_plural+=m(a):s==="msgctxt"&&(r.msgctxt+=m(a)));b&&f++}return h(),e};l.parsePluralForms=function(t){var e=(t||"").split(";").reduce(function(u,o){var n=o.trim(),d=n.indexOf("="),g=n.substring(0,d).trim(),r=n.substring(d+1).trim();return u[g]=r,u},{});return{nplurals:e.nplurals,plural:e.plural}};l.Item=function(t){var e=t&&t.nplurals;this.msgid="",this.msgctxt=null,this.references=[],this.msgid_plural=null,this.msgstr=[],this.comments=[],this.extractedComments=[],this.flags={},this.obsolete=!1;var u=Number(e);this.nplurals=isNaN(u)?2:u};l.Item.prototype.toString=function(){var t=[],e=this,u=function(r){return r=r.replace(/[\x07\b\t\v\f\r"\\]/g,function(s){switch(s){case"\x07":return"\\a";case"\b":return"\\b";case"	":return"\\t";case"\v":return"\\v";case"\f":return"\\f";case"\r":return"\\r";default:return"\\"+s}}),r},o=function(r,s,p){var f=[],c=s.split(/\n/),h=typeof p<"u"?"["+p+"]":"";return c.length>1?(f.push(r+h+' ""'),c.forEach(function(m){f.push('"'+u(m)+'"')})):f.push(r+h+' "'+u(s)+'"'),f},n=function(r,s,p){for(var f=o(r,s,p),c=1;c<f.length-1;c++)f[c]=f[c].slice(0,-1)+'\\n"';return f};this.comments.forEach(function(r){t.push("# "+r)}),this.extractedComments.forEach(function(r){t.push("#. "+r)}),this.references.forEach(function(r){t.push("#: "+r)});var d=Object.keys(this.flags).filter(function(r){return!!this.flags[r]},this);d.length>0&&t.push("#, "+d.join(","));var g=this.obsolete?"#~ ":"";return["msgctxt","msgid","msgid_plural","msgstr"].forEach(function(r){var s=e[r];if(s!=null){var p=!1;if(Array.isArray(s)&&(p=s.some(function(m){return m})),Array.isArray(s)&&s.length>1)s.forEach(function(m,a){var b=n(r,m,a);t=t.concat(g+b.join(`
`+g))});else if(e.msgid_plural&&r==="msgstr"&&!p)for(var f=0;f<e.nplurals;f++)t=t.concat(g+o(r,"",f));else{var c=e.msgid_plural&&Array.isArray(s)?0:void 0;s=Array.isArray(s)?s.join():s;var h=n(r,s,c);t=t.concat(g+h.join(`
`+g))}}}),t.join(`
`)};var A=l;const S=y(A);export{S as P};
